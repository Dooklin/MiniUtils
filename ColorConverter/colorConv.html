<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- CSS -->
  <link rel="stylesheet" href="../main.css">
  <link rel="stylesheet" href="colorconv.css">

  <!-- FONTS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <!-- Me :D -->
  <meta name="author" content="Dooklin">
  <title>MiniUtils</title>
</head>
<body>
  <div id="colorconv-content">

    <a href="../index.html" id="linkback"><</a>
    <h1 id="colorconv-heading">> Color Converter HEX->RBG</h1>

    <div id="colorconv-beam"></div>

    <div id="color-input">
      <input type="text" oninput="ColorConv();" name="hex-input" id="hex-input" placeholder="#??????" maxlength="7">
    </div>

    <div id="colorconv-resultarea">
      <div id="color-preview">?</div>
      <div id="rgb-area">
        <div class="rgb-output" id="red-output">R: </div>
        <div class="rgb-output" id="green-output">G: </div>
        <div class="rgb-output" id="blue-output">B: </div>
      </div>
    </div>

  </div>

  <script>
  const previewBox = document.getElementById("color-preview");

  function ColorConv() {
    let hexInput = document.getElementById("hex-input").value.trim();

    if (!hexInput.startsWith("#")) {
      hexInput = "#" + hexInput;
    }
    
    const isValidHex = /^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/.test(hexInput);

    if (isValidHex) {
      previewBox.style.backgroundColor = hexInput;
      previewBox.innerHTML = "";
      
      const rgb = getComputedStyle(previewBox).backgroundColor;
      
      document.getElementById("red-output").textContent = "R: " + rgb.match(/\d+/g)[0];
      document.getElementById("green-output").textContent = "G: " + rgb.match(/\d+/g)[1];
      document.getElementById("blue-output").textContent = "B: " + rgb.match(/\d+/g)[2];
    } else {
      previewBox.style.backgroundColor = "";
      previewBox.innerHTML = "?";
      document.getElementById("red-output").textContent = "R: ";
      document.getElementById("green-output").textContent = "G: ";
      document.getElementById("blue-output").textContent = "B: ";
    }
  }
  </script>
</body>
</html>