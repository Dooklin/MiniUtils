<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- CSS -->
  <link rel="stylesheet" href="../main.css">
  <link rel="stylesheet" href="../generalCard.css">
  <link rel="stylesheet" href="russianrou.css">

  <!-- FONTS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <!-- Me :D -->
  <meta name="author" content="Dooklin">
  <title>MiniUtils</title>
</head>
<body>
  <div class="general-content">

    <a href="../index.html" class="linkback"><</a>
    <h1 class="general-heading" id="russianroul-heading">> Russian Roulette </h1>

    <div class="general-beam" id="russianroul-beam"></div>

    <div id="rr-game-container">
      <img src="RRDeathAnim/RussianRouletteAnim1.png" onclick="Shoot()" alt="Game" id="rr-gun" class="pixelated">
      <!--
      <img src="RussianRouletteGun.png" id="rr-gun" class="pixelated" alt="GUN">
      <img src="RussianRouletteYou.png" id="rr-you" class="pixelated" alt="You">
      -->
    </div>

    <div id="rr-shoot-container">
      <img src="RussianRouletteShoot.png" onclick="Shoot()" id="rr-shoot" class="pixelated" alt="SHOOT">
    </div>

    <div id="rr-chance-container">
      <span class="chance-text">You have a&nbsp;</span>
      <span id="chance" class="chance-text">Test</span>
      <span class="chance-text">&nbsp;Chance of Dying</span>

      <span class="chance-text" style="display: none;">You Died :/</span>
    </div>
  </div>

  <script>
  let chamber = 0;
  const bulletPosition = Math.floor(Math.random() * 6);
  const totalChambers = 6;
  const game = document.getElementById("rr-gun");

  function updateChance() {
    const chambersLeft = totalChambers - chamber;
    const chance = 1 / chambersLeft;
    const chanceText = document.getElementById("chance");

    const percent = (chance * 100).toFixed(1);
    chanceText.textContent = `${percent}%`;
  }

  function Shoot() {
  const deathMessage = document.querySelectorAll(".chance-text")[3];
  if (deathMessage.style.display !== "none") return;

  if (chamber === bulletPosition) {
    document.getElementById("chance").style.display = "none";
    document.querySelectorAll(".chance-text")[0].style.display = "none";
    document.querySelectorAll(".chance-text")[2].style.display = "none";
    deathMessage.style.display = "inline";

    let frame = 1;
    const totalFrames = 18;
    const fps = 12;
    const frameDuration = 1000 / fps;
    const game = document.getElementById("rr-gun");

    const animInterval = setInterval(() => {
      if (frame > totalFrames) {
        clearInterval(animInterval);
        return;
      }
      game.src = `RRDeathAnim/RussianRouletteAnim${frame}.png`;
      frame++;
    }, frameDuration);

  } else {
    chamber++;
    updateChance();

    const game = document.getElementById("rr-gun");
    const originalSrc = "RRDeathAnim/RussianRouletteAnim1.png";

    game.src = "RussianRouletteGunTrigger.png";

    setTimeout(() => {
      game.src = originalSrc;
    }, 500);
  }

}

  window.onload = () => {
    updateChance();
  };
</script>


</body>
</html>